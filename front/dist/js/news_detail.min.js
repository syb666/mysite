function NewsList(){}NewsList.prototype.run=function(){this.listenSubmetEvent(),template.defaults.imports.timeSince=function(e){var t=new Date(e).getTime(),n=(new Date).getTime(),s=parseInt((n-t)/1e3);return s<60?"刚刚":60<=s&&s<3600?(m=parseInt(s/60),m+"分钟前"):3600<=s&&s<86400?(m=parseInt(s/3600),m+"小时前"):86400<=s&&s<=2592e3?(m=parseInt(s/86400),"%d天前"%m):s.getFullYear()+"年"+s.getMonth()+"月"+s.getDay()+"日"+s.getHours()+":"+s.getMinutes()+":"+s.getSeconds()}},NewsList.prototype.listenSubmetEvent=function(){var n=$(".submit-btn"),o=$("textarea[name='comment']");n.click(function(){var e=o.val(),t=n.attr("data-news-id");xfzajax.post({url:"/news/public_comment/",data:{content:e,news_id:t},success:function(e){if(console.log(e),200===e.code){var t=e.data,n=template("comment-item",{comment:t}),s=$(".comment-list");s.prepend(n),console.log(s.length),window.messageBox.showSuccess("评论发表成功！"),o.val("")}else window.messageBox.showError(e.message)}})})},$(function(){(new NewsList).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5ld3NfZGV0YWlsLmpzIl0sIm5hbWVzIjpbIk5ld3NMaXN0IiwicHJvdG90eXBlIiwicnVuIiwidGhpcyIsImxpc3RlblN1Ym1ldEV2ZW50IiwidGVtcGxhdGUiLCJkZWZhdWx0cyIsImltcG9ydHMiLCJ0aW1lU2luY2UiLCJkYXRlVmFsdWUiLCJkYXRldHMiLCJEYXRlIiwiZ2V0VGltZSIsImN1cnJlbnREYXRlIiwidGltZWRlbHkiLCJwYXJzZUludCIsIm0iLCJnZXRGdWxsWWVhciIsImdldE1vbnRoIiwiZ2V0RGF5IiwiZ2V0SG91cnMiLCJnZXRNaW51dGVzIiwiZ2V0U2Vjb25kcyIsInN1Ym1pdEJ0biIsIiQiLCJ0ZXh0YXJlYSIsImNsaWNrIiwiY29udGVudCIsInZhbCIsIm5ld3NfaWQiLCJhdHRyIiwieGZ6YWpheCIsInBvc3QiLCJ1cmwiLCJkYXRhIiwic3VjY2VzcyIsInJlc3VsdCIsImNvbnNvbGUiLCJsb2ciLCJjb21tZW50IiwidHBsIiwiY29tbWVudExpc3RHcm91cCIsInByZXBlbmQiLCJsZW5ndGgiLCJ3aW5kb3ciLCJtZXNzYWdlQm94Iiwic2hvd1N1Y2Nlc3MiLCJzaG93RXJyb3IiXSwibWFwcGluZ3MiOiJBQUNBLFNBQVNBLFlBSVRBLFNBQVNDLFVBQVVDLElBQU0sV0FDVkMsS0FDTkMsb0JBQ0xDLFNBQVNDLFNBQVNDLFFBQVFDLFVBQVksU0FBVUMsR0FDNUMsSUFDSUMsRUFETyxJQUFJQyxLQUFLRixHQUNGRyxVQUNkQyxHQUFjLElBQUtGLE1BQVFDLFVBQzNCRSxFQUFXQyxVQUFVRixFQUFZSCxHQUFRLEtBQzdDLE9BQUlJLEVBQVMsR0FDRixLQUNPLElBQVZBLEdBQWdCQSxFQUFTLE1BQzdCRSxFQUFJRCxTQUFTRCxFQUFTLElBQ2ZFLEVBQUUsT0FDTSxNQUFWRixHQUFtQkEsRUFBUyxPQUNqQ0UsRUFBSUQsU0FBU0QsRUFBUyxNQUNmRSxFQUFFLE9BQ00sT0FBVkYsR0FBc0JBLEdBQVUsUUFDckNFLEVBQUlELFNBQVNELEVBQVMsT0FDZixPQUFPRSxHQUdIRixFQUFTRyxjQU1SLElBTEFILEVBQVNJLFdBS0MsSUFKWkosRUFBU0ssU0FJVyxJQUhuQkwsRUFBU00sV0FHbUIsSUFGMUJOLEVBQVNPLGFBRTRCLElBRHJDUCxFQUFTUSxlQU1sQ3RCLFNBQVNDLFVBQVVHLGtCQUFvQixXQUNuQyxJQUFJbUIsRUFBWUMsRUFBRSxlQUNkQyxFQUFXRCxFQUFFLDRCQUNqQkQsRUFBVUcsTUFBTSxXQUNaLElBQUlDLEVBQVVGLEVBQVNHLE1BQ25CQyxFQUFVTixFQUFVTyxLQUFLLGdCQUM3QkMsUUFBUUMsS0FBSyxDQUNUQyxJQUFPLHdCQUNQQyxLQUFPLENBQ0hQLFFBQVdBLEVBQ1hFLFFBQVdBLEdBRWZNLFFBQVcsU0FBVUMsR0FFakIsR0FEQUMsUUFBUUMsSUFBSUYsR0FDVSxNQUFuQkEsRUFBYSxLQUFVLENBQ3RCLElBQUlHLEVBQVVILEVBQWEsS0FDdkJJLEVBQU1uQyxTQUFTLGVBQWUsQ0FBQ2tDLFFBQVVBLElBQ3pDRSxFQUFtQmpCLEVBQUUsaUJBQ3pCaUIsRUFBaUJDLFFBQVFGLEdBQ3pCSCxRQUFRQyxJQUFJRyxFQUFpQkUsUUFDN0JDLE9BQU9DLFdBQVdDLFlBQVksV0FDOUJyQixFQUFTRyxJQUFJLFNBRWJnQixPQUFPQyxXQUFXRSxVQUFVWCxFQUFnQixlQU9oRVosRUFBRSxZQUNpQixJQUFJeEIsVUFDVkUiLCJmaWxlIjoibmV3c19kZXRhaWwubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbmZ1bmN0aW9uIE5ld3NMaXN0KCkge1xyXG5cclxufVxyXG5cclxuTmV3c0xpc3QucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmxpc3RlblN1Ym1ldEV2ZW50KCk7XHJcbiAgICB0ZW1wbGF0ZS5kZWZhdWx0cy5pbXBvcnRzLnRpbWVTaW5jZSA9IGZ1bmN0aW9uIChkYXRlVmFsdWUpIHtcclxuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKGRhdGVWYWx1ZSk7XHJcbiAgICAgICAgdmFyIGRhdGV0cyA9IGRhdGUuZ2V0VGltZSgpOy8v6I635Y+W5Yib5bu65pe26Ze0XHJcbiAgICAgICAgdmFyIGN1cnJlbnREYXRlID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKTsvL+W9k+WJjeaXtumXtFxyXG4gICAgICAgIHZhciB0aW1lZGVseSA9IHBhcnNlSW50KChjdXJyZW50RGF0ZS1kYXRldHMpLzEwMDApO1xyXG4gICAgICAgIGlmICh0aW1lZGVseTw2MClcclxuICAgICAgICAgICAgcmV0dXJuIFwi5Yia5YiaXCI7XHJcbiAgICAgICAgZWxzZSBpZih0aW1lZGVseT49NjAgJiYgdGltZWRlbHk8NjAqNjApe1xyXG4gICAgICAgICAgICBtID0gcGFyc2VJbnQodGltZWRlbHkvNjApO1xyXG4gICAgICAgICAgICByZXR1cm4gbStcIuWIhumSn+WJjVwiO1xyXG4gICAgICAgIH1lbHNlIGlmKHRpbWVkZWx5Pj02MCo2MCAmJiB0aW1lZGVseTw2MCo2MCoyNCl7XHJcbiAgICAgICAgICAgIG0gPSBwYXJzZUludCh0aW1lZGVseS8oNjAqNjApKTtcclxuICAgICAgICAgICAgcmV0dXJuIG0rXCLlsI/ml7bliY1cIjtcclxuICAgICAgICB9ZWxzZSBpZih0aW1lZGVseT49NjAqNjAqMjQgJiYgdGltZWRlbHk8PTYwKjYwKjI0KjMwKXtcclxuICAgICAgICAgICAgbSA9IHBhcnNlSW50KHRpbWVkZWx5Lyg2MCo2MCoyNCkpO1xyXG4gICAgICAgICAgICByZXR1cm4gXCIlZOWkqeWJjVwiJW1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgdmFyIHllYXIgPSB0aW1lZGVseS5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgICAgICB2YXIgbW9udGggPSB0aW1lZGVseS5nZXRNb250aCgpO1xyXG4gICAgICAgICAgICB2YXIgZGF5ID0gdGltZWRlbHkuZ2V0RGF5KCk7XHJcbiAgICAgICAgICAgIHZhciBob3VyID0gdGltZWRlbHkuZ2V0SG91cnMoKTtcclxuICAgICAgICAgICAgdmFyIG1pbnV0ZSA9IHRpbWVkZWx5LmdldE1pbnV0ZXMoKTtcclxuICAgICAgICAgICAgdmFyIHNlY29uZCA9IHRpbWVkZWx5LmdldFNlY29uZHMoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHllYXIrXCLlubRcIittb250aCtcIuaciFwiK2RheStcIuaXpVwiK2hvdXIrXCI6XCIrbWludXRlK1wiOlwiK3NlY29uZDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59O1xyXG5cclxuTmV3c0xpc3QucHJvdG90eXBlLmxpc3RlblN1Ym1ldEV2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzdWJtaXRCdG4gPSAkKCcuc3VibWl0LWJ0bicpO1xyXG4gICAgdmFyIHRleHRhcmVhID0gJChcInRleHRhcmVhW25hbWU9J2NvbW1lbnQnXVwiKTtcclxuICAgIHN1Ym1pdEJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGNvbnRlbnQgPSB0ZXh0YXJlYS52YWwoKTtcclxuICAgICAgICB2YXIgbmV3c19pZCA9IHN1Ym1pdEJ0bi5hdHRyKCdkYXRhLW5ld3MtaWQnKTtcclxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzogJy9uZXdzL3B1YmxpY19jb21tZW50LycsXHJcbiAgICAgICAgICAgICdkYXRhJzp7XHJcbiAgICAgICAgICAgICAgICAnY29udGVudCc6IGNvbnRlbnQsXHJcbiAgICAgICAgICAgICAgICAnbmV3c19pZCc6IG5ld3NfaWRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbW1lbnQgPSByZXN1bHRbJ2RhdGEnXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdHBsID0gdGVtcGxhdGUoJ2NvbW1lbnQtaXRlbScse1wiY29tbWVudFwiOmNvbW1lbnR9KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY29tbWVudExpc3RHcm91cCA9ICQoXCIuY29tbWVudC1saXN0XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbW1lbnRMaXN0R3JvdXAucHJlcGVuZCh0cGwpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGNvbW1lbnRMaXN0R3JvdXAubGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93U3VjY2Vzcygn6K+E6K665Y+R6KGo5oiQ5Yqf77yBJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dGFyZWEudmFsKFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd0Vycm9yKHJlc3VsdFsnbWVzc2FnZSddKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBuZXdzTGlzdCA9IG5ldyBOZXdzTGlzdCgpO1xyXG4gICAgbmV3c0xpc3QucnVuKCk7XHJcbn0pOyJdfQ==
