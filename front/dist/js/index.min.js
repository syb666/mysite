function Banner(){this.pageControl=$(".page-control"),this.bannerWidth=798,this.bannerGroup=$("#banner-group"),this.index=1,this.leftArrow=$(".left-arrow"),this.rightArrow=$(".right-arrow"),this.bannerUl=$("#banner-ul"),this.liList=this.bannerUl.children("li"),this.bannerCount=this.liList.length,this.listenBannerHover()}function Index(){this.page=2,this.category_id=0}Banner.prototype.initBanner=function(){var n=this;n.bannerUl.css({Width:n.bannerWidth*n.bannerCount});var t=n.liList.eq(0).clone(),e=n.liList.eq(n.bannerCount-1).clone();n.bannerUl.append(t),n.bannerUl.prepend(e),n.bannerUl.css({width:(n.bannerCount+2)*n.bannerWidth,left:-n.bannerWidth})},Banner.prototype.initPageControl=function(){for(var n=this,t=0;t<n.bannerCount;t++){var e=$("<li></li>");n.pageControl.append(e),0===t&&e.addClass("active")}n.pageControl.css({width:12*n.bannerCount+16+16*(n.bannerCount-1)}),n.bannerUl.css({width:n.bannerCount*this.bannerWidth})},Banner.prototype.toggleArrow=function(n){var t=this;n?(t.leftArrow.show(),t.rightArrow.show()):(t.leftArrow.hide(),t.rightArrow.hide())},Banner.prototype.animate=function(){var n=this;n.bannerUl.stop().animate({left:-798*n.index},500);var t=n.index;t=0===t?n.bannerCount-1:t===n.bannerCount+1?0:n.index-1,n.pageControl.children("li").eq(t).addClass("active").siblings().removeClass("active")},Banner.prototype.loop=function(){var n=this;this.timer=setInterval(function(){n.index>=n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()},1e3)},Banner.prototype.listenArrowClick=function(){var n=this;n.leftArrow.click(function(){0===n.index?(n.bannerUl.css({left:-n.bannerWidth*n.bannerCount}),n.index=n.bannerCount-1):n.index--,n.animate()}),n.rightArrow.click(function(){n.index===n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()})},Banner.prototype.listenBannerHover=function(){var n=this;this.bannerGroup.hover(function(){clearInterval(n.timer),n.toggleArrow(!0)},function(){n.loop(),n.toggleArrow(!1)})},Banner.prototype.listPageControl=function(){var e=this;e.pageControl.children("li").each(function(n,t){$(t).click(function(){e.index=n+1,console.log(n),e.animate()})})},Banner.prototype.run=function(){this.loop(),this.listenArrowClick(),this.initPageControl(),this.initBanner(),this.listPageControl()},Index.prototype.listenLoadMoreEvent=function(){var i=this,r=$("#load-more-btn");r.click(function(){xfzajax.get({url:"/news/list/",data:{p:i.page,category_id:i.category_id},success:function(n){if(200===n.code){var t=n.data;if(0<t.length){var e=template("news_item",{newses:t});$(".list-inner-group").append(e),i.page+=1}else r.hide()}}})})},Index.prototype.listenCategorySwitchEvent=function(){var a=this;$(".list-tab").children().click(function(){var r=$(this),o=r.attr("data-category");console.log(o),xfzajax.get({url:"/news/list/",data:{category_id:o,p:1},success:function(n){if(200===n.code){console.log(n.data);var t=n.data,e=template("news_item",{newses:t}),i=$(".list-inner-group");i.empty(),i.append(e),a.page=2,a.category_id=o,r.addClass("active").siblings().removeClass("active"),$(".load-more").show()}}})})},Index.prototype.run=function(){this.listenLoadMoreEvent(),this.listenCategorySwitchEvent()},$(function(){(new Banner).run(),(new Index).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkJhbm5lciIsInRoaXMiLCJwYWdlQ29udHJvbCIsIiQiLCJiYW5uZXJXaWR0aCIsImJhbm5lckdyb3VwIiwiaW5kZXgiLCJsZWZ0QXJyb3ciLCJyaWdodEFycm93IiwiYmFubmVyVWwiLCJsaUxpc3QiLCJjaGlsZHJlbiIsImJhbm5lckNvdW50IiwibGVuZ3RoIiwibGlzdGVuQmFubmVySG92ZXIiLCJJbmRleCIsInBhZ2UiLCJjYXRlZ29yeV9pZCIsInByb3RvdHlwZSIsImluaXRCYW5uZXIiLCJzZWxmIiwiY3NzIiwiV2lkdGgiLCJmaXJzdEJhbm5lciIsImVxIiwiY2xvbmUiLCJsYXN0QmFubmVyIiwiYXBwZW5kIiwicHJlcGVuZCIsIndpZHRoIiwibGVmdCIsImluaXRQYWdlQ29udHJvbCIsImkiLCJjaXJjbGUiLCJhZGRDbGFzcyIsInRvZ2dsZUFycm93IiwiaXNTaG93Iiwic2hvdyIsImhpZGUiLCJhbmltYXRlIiwic3RvcCIsInNpYmxpbmdzIiwicmVtb3ZlQ2xhc3MiLCJsb29wIiwidGltZXIiLCJzZXRJbnRlcnZhbCIsImxpc3RlbkFycm93Q2xpY2siLCJjbGljayIsImhvdmVyIiwiY2xlYXJJbnRlcnZhbCIsImxpc3RQYWdlQ29udHJvbCIsImVhY2giLCJvYmoiLCJjb25zb2xlIiwibG9nIiwicnVuIiwibGlzdGVuTG9hZE1vcmVFdmVudCIsImxvYWRNb3JlQnRuIiwieGZ6YWpheCIsImdldCIsInVybCIsImRhdGEiLCJwIiwic3VjY2VzcyIsInJlc3VsdCIsIm5ld3NlcyIsInRwbCIsInRlbXBsYXRlIiwibGlzdGVuQ2F0ZWdvcnlTd2l0Y2hFdmVudCIsImxpIiwiYXR0ciIsImxpc3RJbm5lckdyb3VwIiwiZW1wdHkiXSwibWFwcGluZ3MiOiJBQTBCQSxTQUFTQSxTQUNMQyxLQUFLQyxZQUFZQyxFQUFFLGlCQUNuQkYsS0FBS0csWUFBWSxJQUNqQkgsS0FBS0ksWUFBY0YsRUFBRSxpQkFDckJGLEtBQUtL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QWNvRCxFQUFHQyxLQUFLLGlCQUUxQmpCLFFBQVFDLElBQUlyQyxHQUVaeUMsUUFBUUMsSUFBSSxDQUNSQyxJQUFNLGNBQ05DLEtBQU8sQ0FDSDVDLFlBQWNBLEVBQ2Q2QyxFQVBHLEdBU1BDLFFBQVUsU0FBVUMsR0FDaEIsR0FBb0IsTUFBakJBLEVBQWEsS0FBUSxDQUNwQlgsUUFBUUMsSUFBSVUsRUFBYSxNQUN6QixJQUFJQyxFQUFTRCxFQUFhLEtBQ3RCRSxFQUFNQyxTQUFTLFlBQVksQ0FBQ0YsT0FBU0EsSUFDckNNLEVBQWlCcEUsRUFBRSxxQkFDdkJvRSxFQUFlQyxRQUNmRCxFQUFlNUMsT0FBT3VDLEdBQ3RCOUMsRUFBS0osS0FBTyxFQUNaSSxFQUFLSCxZQUFjQSxFQUNuQm9ELEVBQUduQyxTQUFTLFVBQVVPLFdBQVdDLFlBQVksVUFDOUJ2QyxFQUFFLGNBQ1JrQyxjQU83QnRCLE1BQU1HLFVBQVVxQyxJQUFNLFdBQ1B0RCxLQUNOdUQsc0JBRE12RCxLQUVObUUsNkJBS1RqRSxFQUFFLFlBQ2UsSUFBSUgsUUFDVnVELE9BRUssSUFBSXhDLE9BQ1Z3QyIsImZpbGUiOiJpbmRleC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyDpnaLlkJHlr7nosaFcclxuLy8gMS4g5re75Yqg5bGe5oCnXHJcbi8vIOmAmui/h3RoaXPlhbPplK7lrZfvvIznu5HlrprlsZ7mgKfvvIzlubbkuJTmjIflrprku5bnmoTlgLzjgIJcclxuLy8g5Y6f5Z6L6ZO+XHJcbi8vIDIuIOa3u+WKoOaWueazlVxyXG4vLyDlnKhCYW5uZXIucHJvdG90eXBl5LiK57uR5a6a5pa55rOV5bCx5Y+v5Lul5LqG44CCXHJcbi8vIEBpbXBvcnQoXCIuLi8uLi9kaXN0L2pzL2pxdWVyeS0zLjMuMS5taW4uanNcIilcclxuLy8gZnVuY3Rpb24gQmFubmVyKCkge1xyXG4vLyAgICAgLy8g6L+Z5Liq6YeM6Z2i5YaZ55qE5Luj56CBXHJcbi8vICAgICAvLyDnm7jlvZPkuo7mmK9QeXRob27kuK3nmoRfX2luaXRfX+aWueazleeahOS7o+eggVxyXG4vLyAgICAgY29uc29sZS5sb2coJ+aehOmAoOWHveaVsCcpO1xyXG4vLyAgICAgdGhpcy5wZXJzb24gPSAnemhpbGlhbyc7XHJcbi8vIH1cclxuLy9cclxuLy8gQmFubmVyLnByb3RvdHlwZS5ncmVldCA9IGZ1bmN0aW9uICh3b3JkKSB7XHJcbi8vICAgICBjb25zb2xlLmxvZygnaGVsbG8gJyx3b3JkKTtcclxuLy8gfTtcclxuLy9cclxuLy8gdmFyIGJhbm5lciA9IG5ldyBCYW5uZXIoKTtcclxuLy8gY29uc29sZS5sb2coYmFubmVyLnBlcnNvbik7XHJcbi8vIGJhbm5lci5ncmVldCgnemhpbGlhbycpO1xyXG5cclxuXHJcblxyXG5cclxuXHJcbmZ1bmN0aW9uIEJhbm5lcigpIHtcclxuICAgIHRoaXMucGFnZUNvbnRyb2w9JChcIi5wYWdlLWNvbnRyb2xcIik7XHJcbiAgICB0aGlzLmJhbm5lcldpZHRoPTc5ODtcclxuICAgIHRoaXMuYmFubmVyR3JvdXAgPSAkKFwiI2Jhbm5lci1ncm91cFwiKTtcclxuICAgIHRoaXMuaW5kZXg9MTtcclxuICAgIHRoaXMubGVmdEFycm93PSQoXCIubGVmdC1hcnJvd1wiKTtcclxuICAgIHRoaXMucmlnaHRBcnJvdz0kKFwiLnJpZ2h0LWFycm93XCIpOy8v6L+Z6YeM5LiN6KaB5YaZI+WPt1xyXG4gICAgdGhpcy5iYW5uZXJVbD0kKFwiI2Jhbm5lci11bFwiKTtcclxuICAgIHRoaXMubGlMaXN0ID0gdGhpcy5iYW5uZXJVbC5jaGlsZHJlbihcImxpXCIpO1xyXG4gICAgdGhpcy5iYW5uZXJDb3VudCA9IHRoaXMubGlMaXN0Lmxlbmd0aDtcclxuICAgIHRoaXMubGlzdGVuQmFubmVySG92ZXIoKTtcclxuXHJcbn1cclxuXHJcbkJhbm5lci5wcm90b3R5cGUuaW5pdEJhbm5lcj1mdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGY9dGhpcztcclxuICAgIHNlbGYuYmFubmVyVWwuY3NzKHtcIldpZHRoXCI6c2VsZi5iYW5uZXJXaWR0aCpzZWxmLmJhbm5lckNvdW50fSk7XHJcbiAgICB2YXIgZmlyc3RCYW5uZXIgPSBzZWxmLmxpTGlzdC5lcSgwKS5jbG9uZSgpO1xyXG4gICAgdmFyIGxhc3RCYW5uZXIgPSBzZWxmLmxpTGlzdC5lcShzZWxmLmJhbm5lckNvdW50LTEpLmNsb25lKCk7XHJcbiAgICBzZWxmLmJhbm5lclVsLmFwcGVuZChmaXJzdEJhbm5lcik7XHJcbiAgICBzZWxmLmJhbm5lclVsLnByZXBlbmQobGFzdEJhbm5lcik7XHJcbiAgICBzZWxmLmJhbm5lclVsLmNzcyh7XCJ3aWR0aFwiOihzZWxmLmJhbm5lckNvdW50KzIpKnNlbGYuYmFubmVyV2lkdGgsXCJsZWZ0XCI6LXNlbGYuYmFubmVyV2lkdGh9KTtcclxuXHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmluaXRQYWdlQ29udHJvbD1mdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgLy92YXIgcGFnZUNvbnRyb2wgPSAkKFwiLnBhZ2UtY29udHJvbFwiKTtcclxuXHJcbiAgICBmb3IodmFyIGk9MDtpPHNlbGYuYmFubmVyQ291bnQ7aSsrKXtcclxuICAgICAgICB2YXIgY2lyY2xlID0gJChcIjxsaT48L2xpPlwiKTsvL+WIm+W7uuS4gOS4qmxp5qCH562+XHJcbiAgICAgICAgc2VsZi5wYWdlQ29udHJvbC5hcHBlbmQoY2lyY2xlKTtcclxuICAgICAgICBpZihpPT09MCl7XHJcbiAgICAgICAgICAgIGNpcmNsZS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzZWxmLnBhZ2VDb250cm9sLmNzcyh7XCJ3aWR0aFwiOnNlbGYuYmFubmVyQ291bnQqMTIrOCoyKzE2KihzZWxmLmJhbm5lckNvdW50LTEpfSk7XHJcbiAgICBzZWxmLmJhbm5lclVsLmNzcyh7XCJ3aWR0aFwiOnNlbGYuYmFubmVyQ291bnQqdGhpcy5iYW5uZXJXaWR0aH0pO1xyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS50b2dnbGVBcnJvdz1mdW5jdGlvbihpc1Nob3cpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICBpZihpc1Nob3cpe1xyXG4gICAgICAgICAgc2VsZi5sZWZ0QXJyb3cuc2hvdygpO1xyXG4gICAgICAgICAgc2VsZi5yaWdodEFycm93LnNob3coKTtcclxuICAgICAgfWVsc2V7XHJcbiAgICAgICAgICBzZWxmLmxlZnRBcnJvdy5oaWRlKCk7XHJcbiAgICAgICAgICBzZWxmLnJpZ2h0QXJyb3cuaGlkZSgpO1xyXG4gICAgICB9XHJcbn07XHJcblxyXG5cclxuXHJcbkJhbm5lci5wcm90b3R5cGUuYW5pbWF0ZSA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmJhbm5lclVsLnN0b3AoKS5hbmltYXRlKHtcImxlZnRcIjotNzk4KnNlbGYuaW5kZXh9LDUwMCk7XHJcbiAgICB2YXIgaW5kZXggPSBzZWxmLmluZGV4O1xyXG4gICAgaWYoaW5kZXg9PT0wKXtcclxuICAgICAgICBpbmRleD1zZWxmLmJhbm5lckNvdW50LTE7XHJcbiAgICB9ZWxzZSBpZihpbmRleD09PXNlbGYuYmFubmVyQ291bnQrMSl7XHJcbiAgICAgICAgaW5kZXg9MDtcclxuICAgIH1lbHNle1xyXG4gICAgICAgIGluZGV4PXNlbGYuaW5kZXgtMTtcclxuICAgIH1cclxuICAgIHNlbGYucGFnZUNvbnRyb2wuY2hpbGRyZW4oXCJsaVwiKS5lcShpbmRleCkuYWRkQ2xhc3MoXCJhY3RpdmVcIikuc2libGluZ3MoKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgIC8vZXHmmK/ku6Pooajojrflj5bliLDnmoTnrKzlh6DkuKpsaeagh+etvlxyXG59O1xyXG5cclxuXHJcbkJhbm5lci5wcm90b3R5cGUubG9vcCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgdGhpcy50aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZihzZWxmLmluZGV4Pj1zZWxmLmJhbm5lckNvdW50KzEpe1xyXG4gICAgICAgICAgICBzZWxmLmJhbm5lclVsLmNzcyh7XCJsZWZ0XCI6LXNlbGYuYmFubmVyV2lkdGh9KTtcclxuICAgICAgICAgICAgc2VsZi5pbmRleD0yO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4Kys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xyXG4gICAgfSwxMDAwKTtcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUubGlzdGVuQXJyb3dDbGljaz1mdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5sZWZ0QXJyb3cuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgaWYoc2VsZi5pbmRleD09PTApe1xyXG4gICAgICAgICAgIHNlbGYuYmFubmVyVWwuY3NzKHtcImxlZnRcIjotc2VsZi5iYW5uZXJXaWR0aCooc2VsZi5iYW5uZXJDb3VudCl9KTtcclxuICAgICAgICAgICBzZWxmLmluZGV4PXNlbGYuYmFubmVyQ291bnQtMTtcclxuICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4LS07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xyXG4gICAgfSk7XHJcbiAgICBzZWxmLnJpZ2h0QXJyb3cuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgaWYoc2VsZi5pbmRleD09PXNlbGYuYmFubmVyQ291bnQrMSl7XHJcbiAgICAgICAgICAgc2VsZi5iYW5uZXJVbC5jc3Moe1wibGVmdFwiOi1zZWxmLmJhbm5lcldpZHRofSk7XHJcbiAgICAgICAgICAgc2VsZi5pbmRleD0yO1xyXG4gICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgc2VsZi5pbmRleCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmxpc3RlbkJhbm5lckhvdmVyPWZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7Ly/ov5nph4znmoR0aGlz5piv5LiK6Z2i55qEQmFubmVyXHJcbiAgICB0aGlzLmJhbm5lckdyb3VwLmhvdmVyKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjbGVhckludGVydmFsKHNlbGYudGltZXIpO1xyXG4gICAgICAgIHNlbGYudG9nZ2xlQXJyb3codHJ1ZSk7XHJcbiAgICAgICAgICAvL+esrOS4gOS4quWHveaVsOaYr++8jOaKium8oOagh+enu+WKqOWIsGJhbm5lcuS4iuS8muaJp+ihjOeahOWHveaVsFxyXG4gICAgICB9LGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLmxvb3AoKTtcclxuICAgICAgICBzZWxmLnRvZ2dsZUFycm93KGZhbHNlKTtcclxuICAgICAgICAgIC8v56ys5LqM5Liq5Ye95pWw5piv77yM5ZCn6byg5qCH5LuOYmFubmVy5LiK56e76LWw5Lya5omn6KGM55qE5Ye95pWwXHJcbiAgICAgIH0pO1xyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5saXN0UGFnZUNvbnRyb2w9ZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYucGFnZUNvbnRyb2wuY2hpbGRyZW4oXCJsaVwiKS5lYWNoKGZ1bmN0aW9uIChpbmRleCxvYmopIHtcclxuICAgICAgICAkKG9iaikuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4PWluZGV4KzE7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGluZGV4KTsvL+a1i+ivlVxyXG4gICAgICAgICAgICBzZWxmLmFuaW1hdGUoKTtcclxuICAgICAgICAgICAgLy/lv4Xpobvnp7DkuLpqUeWvueixoeaJjeiDveS9v+eUqC5jbGlja+aWueazlVxyXG4gICAgICAgICAgICAvL+WboOS4uuavj+asoeaJp+ihjGFuaW1hdGXml7bpg73lvpfmiafooYzlpoLkuIvku6PnoIHvvIzmiYDku6Xlj6/ku6XmlL7liLBhbmltYXRl5pa55rOV5LitXHJcbiAgICAgICAgICAgIC8vJChvYmopLmFkZENsYXNzKFwiYWN0aXZlXCIpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfSk7XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLnJ1bj1mdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmxvb3AoKTtcclxuICAgIHRoaXMubGlzdGVuQXJyb3dDbGljaygpO1xyXG4gICAgdGhpcy5pbml0UGFnZUNvbnRyb2woKTtcclxuICAgIHRoaXMuaW5pdEJhbm5lcigpO1xyXG4gICAgdGhpcy5saXN0UGFnZUNvbnRyb2woKVxyXG4gICAgLy8gY29uc29sZS5sb2codGhpcy5iYW5uZXJDb3VudCk7XHJcbiAgICAvLyBjbGVhckludGVydmFsKHRpbWVyKTsvL+WFs+mXreWumuaXtuWZqFxyXG59O1xyXG5cclxuXHJcblxyXG5mdW5jdGlvbiBJbmRleCgpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5wYWdlID0gMjtcclxuICAgIHNlbGYuY2F0ZWdvcnlfaWQgPSAwO1xyXG5cclxufVxyXG5cclxuXHJcblxyXG5JbmRleC5wcm90b3R5cGUubGlzdGVuTG9hZE1vcmVFdmVudCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgbG9hZE1vcmVCdG4gPSAkKCcjbG9hZC1tb3JlLWJ0bicpO1xyXG4gICAgbG9hZE1vcmVCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8v5LuO56ys5LqM6aG15byA5aeLXHJcblxyXG4gICAgICAgIHhmemFqYXguZ2V0KHtcclxuICAgICAgICAgICAgJ3VybCc6Jy9uZXdzL2xpc3QvJyxcclxuICAgICAgICAgICAgJ2RhdGEnOntcclxuICAgICAgICAgICAgICAgICdwJzogc2VsZi5wYWdlLFxyXG4gICAgICAgICAgICAgICAgJ2NhdGVnb3J5X2lkJzpzZWxmLmNhdGVnb3J5X2lkXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzpmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXT09PTIwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld3NlcyA9IHJlc3VsdFsnZGF0YSddO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdzZXMubGVuZ3RoPjApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHBsID0gdGVtcGxhdGUoXCJuZXdzX2l0ZW1cIix7XCJuZXdzZXNcIjpuZXdzZXN9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVsID0gJCgnLmxpc3QtaW5uZXItZ3JvdXAnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdWwuYXBwZW5kKHRwbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucGFnZSs9MTtcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9hZE1vcmVCdG4uaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59O1xyXG5cclxuSW5kZXgucHJvdG90eXBlLmxpc3RlbkNhdGVnb3J5U3dpdGNoRXZlbnQgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIHRhYkdyb3VwID0gJCgnLmxpc3QtdGFiJyk7XHJcbiAgICB0YWJHcm91cC5jaGlsZHJlbigpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgbGkgPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciBjYXRlZ29yeV9pZCA9IGxpLmF0dHIoJ2RhdGEtY2F0ZWdvcnknKTtcclxuICAgICAgICB2YXIgcGFnZSA9IDE7XHJcbiAgICAgICAgY29uc29sZS5sb2coY2F0ZWdvcnlfaWQpO1xyXG4gICAgICAgIC8vIGxpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICB4ZnphamF4LmdldCh7XHJcbiAgICAgICAgICAgICd1cmwnOicvbmV3cy9saXN0LycsXHJcbiAgICAgICAgICAgICdkYXRhJzp7XHJcbiAgICAgICAgICAgICAgICAnY2F0ZWdvcnlfaWQnOmNhdGVnb3J5X2lkLFxyXG4gICAgICAgICAgICAgICAgJ3AnOnBhZ2VcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOmZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddPT09MjAwKXtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHRbJ2RhdGEnXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld3NlcyA9IHJlc3VsdFsnZGF0YSddO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0cGwgPSB0ZW1wbGF0ZShcIm5ld3NfaXRlbVwiLHtcIm5ld3Nlc1wiOm5ld3Nlc30pO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBsaXN0SW5uZXJHcm91cCA9ICQoJy5saXN0LWlubmVyLWdyb3VwJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdElubmVyR3JvdXAuZW1wdHkoKTtcclxuICAgICAgICAgICAgICAgICAgICBsaXN0SW5uZXJHcm91cC5hcHBlbmQodHBsKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnBhZ2UgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY2F0ZWdvcnlfaWQgPSBjYXRlZ29yeV9pZDtcclxuICAgICAgICAgICAgICAgICAgICBsaS5hZGRDbGFzcygnYWN0aXZlJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxvYWRNb3JlID0gJCgnLmxvYWQtbW9yZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxvYWRNb3JlLnNob3coKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KTtcclxufTtcclxuXHJcbkluZGV4LnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5saXN0ZW5Mb2FkTW9yZUV2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3RlbkNhdGVnb3J5U3dpdGNoRXZlbnQoKTtcclxuXHJcbn07XHJcblxyXG4vLyDmlofku7bliqDovb3lrozmr5XlkI7miafooYxcclxuJChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgYmFubmVyID0gbmV3IEJhbm5lcigpO1xyXG4gICAgYmFubmVyLnJ1bigpO1xyXG5cclxuICAgIHZhciBpbmRleCA9IG5ldyBJbmRleCgpO1xyXG4gICAgaW5kZXgucnVuKCk7XHJcblxyXG5cclxufSk7Il19
