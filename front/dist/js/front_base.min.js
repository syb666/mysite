function FrontBase(){}function Auth(){this.maskWrapper=$(".mask-wrapper"),this.scrollWrapper=$(".scroll-wrapper")}FrontBase.prototype.run=function(){this.listenAuthBoxHover()},FrontBase.prototype.listenAuthBoxHover=function(){var t=$(".auth-box"),n=$(".user-more-box");t.hover(function(){n.show()},function(){n.hide()})},$(function(){(new FrontBase).run()}),Auth.prototype.run=function(){var t=this;t.listenShowHideEvent(),t.listenSwitchEvent(),t.listenSigninEvent(),t.listenImgCaptchaEvent(),t.listenSmsCaptchaEvent(),t.listenSignupEvent()},Auth.prototype.showEvent=function(){this.maskWrapper.show()},Auth.prototype.hideEvent=function(){this.maskWrapper.hide()},Auth.prototype.listenImgCaptchaEvent=function(){var t=$(".img-captcha");t.click(function(){t.attr("src","/account/img_captcha/?random="+Math.random())})},Auth.prototype.listenShowHideEvent=function(){var t=this,n=$(".signin-btn"),e=$(".signup-btn"),o=$(".close-btn");$(".scroll-wrapper");n.click(function(){t.showEvent(),t.scrollWrapper.css({left:0})}),e.click(function(){t.showEvent(),t.scrollWrapper.css({left:-400})}),o.click(function(){t.hideEvent()})},Auth.prototype.listenSwitchEvent=function(){var n=this;$(".switch").click(function(){var t=n.scrollWrapper.css("left");(t=parseInt(t))<0?n.scrollWrapper.animate({left:"0"}):n.scrollWrapper.animate({left:"-400px"})})},Auth.prototype.smsSuccessEven=function(){var t=this,n=$(".sms-captcha-btn");window.messageBox.showSuccess("短信发送成功"),n.addClass("disable");var e=60;n.unbind("click");var o=setInterval(function(){n.text(e+"s"),--e<=0&&(clearInterval(o),n.removeClass("disable"),n.text("发送验证码"),t.listenSmsCaptchaEvent())},1e3)},Auth.prototype.listenSmsCaptchaEvent=function(){var n=this,t=$(".sms-captcha-btn"),e=$(".signup-group input[name='telephone']");t.click(function(){telephone=e.val(),telephone?xfzajax.get({url:"/account/sms_captcha/",data:{telephone:telephone},success:function(t){n.smsSuccessEven()},fail:function(t){console.log(t)}}):window.messageBox.showError("请输入手机号")})},Auth.prototype.listenSigninEvent=function(){var o=this,t=$(".signin-group"),s=t.find("input[name='telephone']"),a=t.find("input[name='password']"),i=t.find("input[name='remember']");$(".submit-btn").click(function(){var t=s.val(),n=a.val(),e=i.prop("checked");xfzajax.post({url:"/account/login/",data:{telephone:t,password:n,remember:e?1:0},success:function(t){o.hideEvent(),window.location.reload()}})})},Auth.prototype.listenSignupEvent=function(){var t=$(".signup-group"),n=$(".submit-btn"),c=t.find("input[name='telephone']"),r=t.find("input[name='username']"),p=t.find("input[name='img_captcha']"),l=t.find("input[name='password1']"),u=t.find("input[name='password2']"),h=t.find("input[name='sms_captcha']");n.click(function(t){var n=c.val(),e=r.val(),o=p.val(),s=l.val(),a=u.val(),i=h.val();console.log(n),console.log(e),console.log(o),console.log(s),console.log(a),console.log(i),xfzajax.post({url:"/account/register/",data:{telephone:n,username:e,img_captcha:o,password1:s,password2:a,sms_captcha:i},success:function(t){window.location.reload()}})})},$(function(){(new Auth).run()}),$(function(){window.template&&(template.defaults.imports.timeSince=function(t){var n=new Date(t),e=n.getTime(),o=((new Date).getTime()-e)/1e3;return o<60?"刚刚":60<=o&&o<3600?(minutes=parseInt(o/60),minutes+"分钟前"):3600<=o&&o<86400?(hours=parseInt(o/60/60),hours+"小时前"):86400<=o&&o<2592e3?(days=parseInt(o/60/60/24),days+"天前"):n.getFullYear()+"/"+n.getMonth()+"/"+n.getDay()+" "+n.getHours()+":"+n.getMinutes()})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZyb250X2Jhc2UuanMiXSwibmFtZXMiOlsiRnJvbnRCYXNlIiwiQXV0aCIsInRoaXMiLCJtYXNrV3JhcHBlciIsIiQiLCJzY3JvbGxXcmFwcGVyIiwicHJvdG90eXBlIiwicnVuIiwibGlzdGVuQXV0aEJveEhvdmVyIiwiYXV0aEJveCIsInVzZXJNb3JlQm94IiwiaG92ZXIiLCJzaG93IiwiaGlkZSIsInNlbGYiLCJsaXN0ZW5TaG93SGlkZUV2ZW50IiwibGlzdGVuU3dpdGNoRXZlbnQiLCJsaXN0ZW5TaWduaW5FdmVudCIsImxpc3RlbkltZ0NhcHRjaGFFdmVudCIsImxpc3RlblNtc0NhcHRjaGFFdmVudCIsImxpc3RlblNpZ251cEV2ZW50Iiwic2hvd0V2ZW50IiwiaGlkZUV2ZW50IiwiSW1nQ2FwdGNoYSIsImNsaWNrIiwiYXR0ciIsIk1hdGgiLCJyYW5kb20iLCJzaWduaW5CdG4iLCJzaWdudXBCdG4iLCJjbG9zZUJ0biIsImNzcyIsImxlZnQiLCJjdXJyZW50TGVmdCIsInBhcnNlSW50IiwiYW5pbWF0ZSIsInNtc1N1Y2Nlc3NFdmVuIiwic21zQ2FwdGNoYUJ0biIsIndpbmRvdyIsIm1lc3NhZ2VCb3giLCJzaG93U3VjY2VzcyIsImFkZENsYXNzIiwiY291bnQiLCJ1bmJpbmQiLCJ0aW1lciIsInNldEludGVydmFsIiwidGV4dCIsImNsZWFySW50ZXJ2YWwiLCJyZW1vdmVDbGFzcyIsInRlbGVwaG9uZUlucHV0IiwidGVsZXBob25lIiwidmFsIiwieGZ6YWpheCIsImdldCIsInVybCIsImRhdGEiLCJzdWNjZXNzIiwicmVzdWx0IiwiZmFpbCIsImVycm9yIiwiY29uc29sZSIsImxvZyIsInNob3dFcnJvciIsInNpZ25pbkdyb3VwIiwiZmluZCIsInBhc3N3b3JkSW5wdXQiLCJyZW1lbWJlcklucHV0IiwicGFzc3dvcmQiLCJyZW1lbWJlciIsInByb3AiLCJwb3N0IiwibG9jYXRpb24iLCJyZWxvYWQiLCJzaWdudXBHcm91cCIsInN1Ym1pdEJ0biIsInVzZXJuYW1lSW5wdXQiLCJpbWdDYXB0Y2hhSW5wdXQiLCJwYXNzd29yZDFJbnB1dCIsInBhc3N3b3JkMklucHV0Iiwic21zQ2FwdGNoYUlucHV0IiwiZXZlbnQiLCJ1c2VybmFtZSIsImltZ19jYXB0Y2hhIiwicGFzc3dvcmQxIiwicGFzc3dvcmQyIiwic21zX2NhcHRjaGEiLCJ0ZW1wbGF0ZSIsImRlZmF1bHRzIiwiaW1wb3J0cyIsInRpbWVTaW5jZSIsImRhdGVWYWx1ZSIsImRhdGUiLCJEYXRlIiwiZGF0ZXRzIiwiZ2V0VGltZSIsInRpbWVzdGFtcCIsIm1pbnV0ZXMiLCJob3VycyIsImRheXMiLCJnZXRGdWxsWWVhciIsImdldE1vbnRoIiwiZ2V0RGF5IiwiZ2V0SG91cnMiLCJnZXRNaW51dGVzIl0sIm1hcHBpbmdzIjoiQUFFQSxTQUFTQSxhQXlCVCxTQUFTQyxPQUNNQyxLQUNOQyxZQUFjQyxFQUFFLGlCQURWRixLQUVORyxjQUFnQkQsRUFBRSxtQkF6QjNCSixVQUFVTSxVQUFVQyxJQUFNLFdBQ1hMLEtBQ05NLHNCQUdUUixVQUFVTSxVQUFVRSxtQkFBcUIsV0FDckMsSUFBSUMsRUFBVUwsRUFBRSxhQUNaTSxFQUFjTixFQUFFLGtCQUNwQkssRUFBUUUsTUFBTSxXQUNWRCxFQUFZRSxRQUNkLFdBQ0VGLEVBQVlHLFVBSXBCVCxFQUFFLFlBQ2tCLElBQUlKLFdBQ1ZPLFFBV2ROLEtBQUtLLFVBQVVDLElBQU0sV0FDakIsSUFBSU8sRUFBT1osS0FDWFksRUFBS0Msc0JBQ0xELEVBQUtFLG9CQUNMRixFQUFLRyxvQkFDTEgsRUFBS0ksd0JBQ0xKLEVBQUtLLHdCQUNMTCxFQUFLTSxxQkFJVG5CLEtBQUtLLFVBQVVlLFVBQVksV0FDWm5CLEtBQ05DLFlBQVlTLFFBSXJCWCxLQUFLSyxVQUFVZ0IsVUFBWSxXQUNacEIsS0FDTkMsWUFBWVUsUUFJckJaLEtBQUtLLFVBQVVZLHNCQUF3QixXQUNuQyxJQUFJSyxFQUFhbkIsRUFBRSxnQkFDbkJtQixFQUFXQyxNQUFNLFdBRWRELEVBQVdFLEtBQUss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QyxFQUFjTixFQUFnQjVCLE1BQ2xDUyxRQUFRQyxJQUFJWCxHQUNaVSxRQUFRQyxJQUFJb0IsR0FDWnJCLFFBQVFDLElBQUlxQixHQUNadEIsUUFBUUMsSUFBSXNCLEdBQ1p2QixRQUFRQyxJQUFJdUIsR0FDWnhCLFFBQVFDLElBQUl3QixHQUNaakMsUUFBUWtCLEtBQUssQ0FDVGhCLElBQU0scUJBQ05DLEtBQU8sQ0FDSEwsVUFBWUEsRUFDWitCLFNBQVdBLEVBQ1hDLFlBQWNBLEVBQ2RDLFVBQVlBLEVBQ1pDLFVBQVlBLEVBQ1pDLFlBQWNBLEdBRWxCN0IsUUFBVSxTQUFVQyxHQUNoQm5CLE9BQU9pQyxTQUFTQyxlQVNoQ3BFLEVBQUUsWUFDYSxJQUFJSCxNQUNWTSxRQVFUSCxFQUFFLFdBQ0trQyxPQUFPZ0QsV0FDTkEsU0FBU0MsU0FBU0MsUUFBUUMsVUFBWSxTQUFVQyxHQUM1QyxJQUFJQyxFQUFPLElBQUlDLEtBQUtGLEdBQ2hCRyxFQUFTRixFQUFLRyxVQUVkQyxJQURRLElBQUtILE1BQVFFLFVBQ0FELEdBQVEsSUFDakMsT0FBR0UsRUFBWSxHQUNKLEtBRVUsSUFBYkEsR0FBbUJBLEVBQVksTUFDbkNDLFFBQVU5RCxTQUFTNkQsRUFBWSxJQUN4QkMsUUFBUSxPQUVFLE1BQWJELEdBQXNCQSxFQUFZLE9BQ3RDRSxNQUFRL0QsU0FBUzZELEVBQVksR0FBSyxJQUMzQkUsTUFBTSxPQUVJLE9BQWJGLEdBQXlCQSxFQUFZLFFBQ3pDRyxLQUFPaEUsU0FBUzZELEVBQVksR0FBSyxHQUFLLElBQy9CRyxLQUFPLE1BRUhQLEVBQUtRLGNBS0osSUFKQVIsRUFBS1MsV0FJSyxJQUhaVCxFQUFLVSxTQUdlLElBRm5CVixFQUFLVyxXQUV1QixJQUQxQlgsRUFBS1kiLCJmaWxlIjoiZnJvbnRfYmFzZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuLy8g55So5p2l5aSE55CG5a+86Iiq5p2h55qEXHJcbmZ1bmN0aW9uIEZyb250QmFzZSgpIHt9XHJcblxyXG5cclxuRnJvbnRCYXNlLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmxpc3RlbkF1dGhCb3hIb3ZlcigpO1xyXG59O1xyXG5cclxuRnJvbnRCYXNlLnByb3RvdHlwZS5saXN0ZW5BdXRoQm94SG92ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgYXV0aEJveCA9ICQoXCIuYXV0aC1ib3hcIik7XHJcbiAgICB2YXIgdXNlck1vcmVCb3ggPSAkKFwiLnVzZXItbW9yZS1ib3hcIik7XHJcbiAgICBhdXRoQm94LmhvdmVyKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB1c2VyTW9yZUJveC5zaG93KCk7XHJcbiAgICB9LGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB1c2VyTW9yZUJveC5oaWRlKCk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGZyb250QmFzZSA9IG5ldyBGcm9udEJhc2UoKTtcclxuICAgIGZyb250QmFzZS5ydW4oKTtcclxufSk7XHJcblxyXG5cclxuLy/lpITnkIbnmbvlvZXlkozms6jlhoxcclxuZnVuY3Rpb24gQXV0aCgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubWFza1dyYXBwZXIgPSAkKCcubWFzay13cmFwcGVyJyk7Ly/ojrflj5bnmbvlvZXnmoTpgqPkuKrpobXpnaJcclxuICAgIHNlbGYuc2Nyb2xsV3JhcHBlciA9ICQoXCIuc2Nyb2xsLXdyYXBwZXJcIik7Ly/ojrflj5bnmbvlvZUv5rOo5YaM6YKj5L+p5qGGXHJcblxyXG59XHJcbkF1dGgucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHsvL+imgeaJp+ihjOeahOaWueazlVxyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5saXN0ZW5TaG93SGlkZUV2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3RlblN3aXRjaEV2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3RlblNpZ25pbkV2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3RlbkltZ0NhcHRjaGFFdmVudCgpO1xyXG4gICAgc2VsZi5saXN0ZW5TbXNDYXB0Y2hhRXZlbnQoKTtcclxuICAgIHNlbGYubGlzdGVuU2lnbnVwRXZlbnQoKTtcclxuXHJcblxyXG59O1xyXG5BdXRoLnByb3RvdHlwZS5zaG93RXZlbnQgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5tYXNrV3JhcHBlci5zaG93KCk7XHJcbn07XHJcblxyXG5cclxuQXV0aC5wcm90b3R5cGUuaGlkZUV2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubWFza1dyYXBwZXIuaGlkZSgpO1xyXG59O1xyXG5cclxuLy/nm5HlkKzpqozor4HnoIHlm77niYdcclxuQXV0aC5wcm90b3R5cGUubGlzdGVuSW1nQ2FwdGNoYUV2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBJbWdDYXB0Y2hhID0gJCgnLmltZy1jYXB0Y2hhJyk7XHJcbiAgICBJbWdDYXB0Y2hhLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvL+avj+asoeivt+axgueahOS4jeS4gOagt+aXtuS8muiHquWKqOeahOWIt+aWsFxyXG4gICAgICAgSW1nQ2FwdGNoYS5hdHRyKFwic3JjXCIsXCIvYWNjb3VudC9pbWdfY2FwdGNoYS9cIitcIj9yYW5kb209XCIrTWF0aC5yYW5kb20oKSlcclxuICAgIH0pO1xyXG5cclxufTtcclxuXHJcbi8v55uR5ZCsc2hvd0V2ZW505ZKMaGlkZUV2ZW506L+Z5L+p5pa55rOVXHJcbkF1dGgucHJvdG90eXBlLmxpc3RlblNob3dIaWRlRXZlbnQgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIHNpZ25pbkJ0biA9ICQoJy5zaWduaW4tYnRuJyk7XHJcbiAgICB2YXIgc2lnbnVwQnRuID0gJChcIi5zaWdudXAtYnRuXCIpO1xyXG4gICAgdmFyIGNsb3NlQnRuID0gJCgnLmNsb3NlLWJ0bicpO1xyXG4gICAgdmFyIHNjcm9sbFdyYXBwZXIgPSAkKCcuc2Nyb2xsLXdyYXBwZXInKTtcclxuICAgIHNpZ25pbkJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICBzZWxmLnNob3dFdmVudCgpO1xyXG4gICAgICAgc2VsZi5zY3JvbGxXcmFwcGVyLmNzcyh7XCJsZWZ0XCI6MH0pO1xyXG4gICAgfSk7XHJcbiAgICBzaWdudXBCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgc2VsZi5zaG93RXZlbnQoKTtcclxuICAgICAgIHNlbGYuc2Nyb2xsV3JhcHBlci5jc3Moe1wibGVmdFwiOi00MDB9KTtcclxuICAgIH0pO1xyXG4gICAgY2xvc2VCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuaGlkZUV2ZW50KCk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbi8v55uR5ZCsXHJcbkF1dGgucHJvdG90eXBlLmxpc3RlblN3aXRjaEV2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBzd2l0Y2gxID0gJCgnLnN3aXRjaCcpO1xyXG4gICAgc3dpdGNoMS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRMZWZ0ID0gc2VsZi5zY3JvbGxXcmFwcGVyLmNzcyhcImxlZnRcIik7XHJcbiAgICAgICAgY3VycmVudExlZnQgPSBwYXJzZUludChjdXJyZW50TGVmdCk7XHJcbiAgICAgICAgaWYoY3VycmVudExlZnQgPCAwKXtcclxuICAgICAgICAgICAgLy/lr7lzY3JvbGxXcmFwcGVy5re75Yqg5bGe5oCnbGVmdOWAvOS4ujBcclxuICAgICAgICAgICAgLy9hbmltYXRl5ZKMY3Nz5pyJ5LiA5a6a5Yy65YirXHJcbiAgICAgICAgICAgIHNlbGYuc2Nyb2xsV3JhcHBlci5hbmltYXRlKHtcImxlZnRcIjonMCd9KTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgc2VsZi5zY3JvbGxXcmFwcGVyLmFuaW1hdGUoe1wibGVmdFwiOlwiLTQwMHB4XCJ9KTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufTtcclxuXHJcbi8v55uR5ZCs55+t5L+h6aqM6K+B56CBXHJcbkF1dGgucHJvdG90eXBlLnNtc1N1Y2Nlc3NFdmVuID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBzbXNDYXB0Y2hhQnRuID0gJCgnLnNtcy1jYXB0Y2hhLWJ0bicpO1xyXG4gICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd1N1Y2Nlc3MoXCLnn63kv6Hlj5HpgIHmiJDlip9cIik7XHJcbiAgICBzbXNDYXB0Y2hhQnRuLmFkZENsYXNzKFwiZGlzYWJsZVwiKTtcclxuICAgIHZhciBjb3VudCA9IDYwO1xyXG4gICAgLy/lhbPpl63ngrnlh7vkuovku7ZcclxuICAgIHNtc0NhcHRjaGFCdG4udW5iaW5kKFwiY2xpY2tcIik7XHJcbiAgICB2YXIgdGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICBzbXNDYXB0Y2hhQnRuLnRleHQoY291bnQrXCJzXCIpO1xyXG4gICAgICAgY291bnQtLTtcclxuICAgICAgIGlmKGNvdW50PD0wKXtcclxuICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVyKTtcclxuICAgICAgICAgICBzbXNDYXB0Y2hhQnRuLnJlbW92ZUNsYXNzKCdkaXNhYmxlJyk7XHJcbiAgICAgICAgICAgc21zQ2FwdGNoYUJ0bi50ZXh0KFwi5Y+R6YCB6aqM6K+B56CBXCIpO1xyXG4gICAgICAgICAgIC8v5omn6KGM5a6M5ZCO6YeN5paw5byA5ZCvbGlzdGVuU21zQ2FwdGNoYUV2ZW505pa55rOVXHJcbiAgICAgICAgICAgc2VsZi5saXN0ZW5TbXNDYXB0Y2hhRXZlbnQoKTtcclxuICAgICAgIH1cclxuICAgIH0sMTAwMCk7XHJcbn07XHJcblxyXG5cclxuQXV0aC5wcm90b3R5cGUubGlzdGVuU21zQ2FwdGNoYUV2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBzbXNDYXB0Y2hhQnRuID0gJCgnLnNtcy1jYXB0Y2hhLWJ0bicpO1xyXG4gICAgLy/ojrflj5bovpPlhaXmoYZcclxuICAgIHZhciB0ZWxlcGhvbmVJbnB1dCA9ICQoXCIuc2lnbnVwLWdyb3VwIGlucHV0W25hbWU9J3RlbGVwaG9uZSddXCIpOy8v6L+Z6YeM5LiN6IO955u05o6l6I635Y+WaW5wdXTmoIfnrb7lm6DkuLrvvIzov5jmnInms6jlhozml7bkuZ/mnInkuKppbnB1dOagh+etvu+8jOWuueaYk+a3t+WQiFxyXG4gICAgc21zQ2FwdGNoYUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGVsZXBob25lID0gdGVsZXBob25lSW5wdXQudmFsKCk7XHJcbiAgICAgICAgaWYoIXRlbGVwaG9uZSl7XHJcbiAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3dFcnJvcihcIuivt+i+k+WFpeaJi+acuuWPt1wiKVxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICB4ZnphamF4LmdldCh7XHJcbiAgICAgICAgICAgICAgICd1cmwnOicvYWNjb3VudC9zbXNfY2FwdGNoYS8nLFxyXG4gICAgICAgICAgICAgICAnZGF0YSc6e1xyXG4gICAgICAgICAgICAgICAgICAgXCJ0ZWxlcGhvbmVcIjp0ZWxlcGhvbmVcclxuICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnOmZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgIC8vIHdpbmRvdy5tZXNzYWdlQm94LnNob3dTdWNjZXNzKFwi55+t5L+h5Y+R6YCB5oiQ5YqfXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgc2VsZi5zbXNTdWNjZXNzRXZlbigpO1xyXG4gICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCI9PT09PT09PT09PT09PT09PT1cIik7XHJcbiAgICAgICAgICAgICAgICAgICAvLyBpZihyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcclxuICAgICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICdmYWlsJzpmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufTtcclxuXHJcbi8v55uR5ZCs55m75b2V5pe255qEYWpheOivt+axglxyXG5BdXRoLnByb3RvdHlwZS5saXN0ZW5TaWduaW5FdmVudCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAvL+W/hemhu+WFiOiOt+WPluaJgOWcqOeahHNpZ25pbueEtuWQjuWGjeiOt+WPluS4i+mdoueahOi+k+WFpeahhizlm6DkuLrnmbvlvZXml7bnmoRzaWdudXDkuK3kuZ/mnInkuIvpnaLlh6DkuKrovpPlhaXmoYZcclxuICAgIHZhciBzaWduaW5Hcm91cCA9ICQoJy5zaWduaW4tZ3JvdXAnKTtcclxuICAgIC8v6I635Y+W55m75b2V5pe255qE5LiJ5Liq5a+56K+d5qGGXHJcbiAgICB2YXIgdGVsZXBob25lSW5wdXQgPSBzaWduaW5Hcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ndGVsZXBob25lJ11cIik7XHJcbiAgICB2YXIgcGFzc3dvcmRJbnB1dCA9IHNpZ25pbkdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdwYXNzd29yZCddXCIpO1xyXG4gICAgdmFyIHJlbWVtYmVySW5wdXQgPSBzaWduaW5Hcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ncmVtZW1iZXInXVwiKTtcclxuXHJcbiAgICB2YXIgc3VibWl0QnRuID0gJCgnLnN1Ym1pdC1idG4nKTtcclxuICAgIC8vIGNvbnNvbGUubG9nKHN1Ym1pdEJ0bi5sZW5ndGgpO1xyXG4gICAgc3VibWl0QnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvL+W9k+eCueWHu+KAmOeri+WNs+eZu+W9leKAmeaXtuiOt+WPlui+k+WFpeahhueahOWGheWuuVxyXG5cclxuICAgICAgICB2YXIgdGVsZXBob25lID0gdGVsZXBob25lSW5wdXQudmFsKCk7XHJcbiAgICAgICAgdmFyIHBhc3N3b3JkID0gcGFzc3dvcmRJbnB1dC52YWwoKTtcclxuICAgICAgICB2YXIgcmVtZW1iZXIgPSByZW1lbWJlcklucHV0LnByb3AoXCJjaGVja2VkXCIpOy8v6I635Y+W5Yu+6YCJ5qGGXHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6Jy9hY2NvdW50L2xvZ2luLycsXHJcbiAgICAgICAgICAgICdkYXRhJzp7XHJcbiAgICAgICAgICAgICAgICAndGVsZXBob25lJzp0ZWxlcGhvbmUsXHJcbiAgICAgICAgICAgICAgICAncGFzc3dvcmQnOnBhc3N3b3JkLFxyXG4gICAgICAgICAgICAgICAgJ3JlbWVtYmVyJzpyZW1lbWJlcj8xOjBcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOmZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuaGlkZUV2ZW50KCk7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfSk7XHJcblxyXG59O1xyXG5cclxuQXV0aC5wcm90b3R5cGUubGlzdGVuU2lnbnVwRXZlbnQgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIHNpZ251cEdyb3VwID0gJCgnLnNpZ251cC1ncm91cCcpO1xyXG4gICAgdmFyIHN1Ym1pdEJ0biA9ICQoJy5zdWJtaXQtYnRuJyk7XHJcbiAgICAvLyBjb25zb2xlLmxvZyhzdWJtaXRCdG4ubGVuZ3RoKTtcclxuICAgIHZhciB0ZWxlcGhvbmVJbnB1dCA9IHNpZ251cEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSd0ZWxlcGhvbmUnXVwiKTtcclxuICAgIHZhciB1c2VybmFtZUlucHV0ID0gc2lnbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J3VzZXJuYW1lJ11cIik7XHJcbiAgICB2YXIgaW1nQ2FwdGNoYUlucHV0ID0gc2lnbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J2ltZ19jYXB0Y2hhJ11cIik7XHJcbiAgICB2YXIgcGFzc3dvcmQxSW5wdXQgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ncGFzc3dvcmQxJ11cIik7XHJcbiAgICB2YXIgcGFzc3dvcmQySW5wdXQgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ncGFzc3dvcmQyJ11cIik7XHJcbiAgICB2YXIgc21zQ2FwdGNoYUlucHV0ID0gc2lnbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J3Ntc19jYXB0Y2hhJ11cIik7XHJcbiAgICBzdWJtaXRCdG4uY2xpY2soZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgLy8gZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB2YXIgdGVsZXBob25lID0gdGVsZXBob25lSW5wdXQudmFsKCk7XHJcbiAgICAgICAgdmFyIHVzZXJuYW1lID0gdXNlcm5hbWVJbnB1dC52YWwoKTtcclxuICAgICAgICB2YXIgaW1nX2NhcHRjaGEgPSBpbWdDYXB0Y2hhSW5wdXQudmFsKCk7XHJcbiAgICAgICAgdmFyIHBhc3N3b3JkMSA9IHBhc3N3b3JkMUlucHV0LnZhbCgpO1xyXG4gICAgICAgIHZhciBwYXNzd29yZDIgPSBwYXNzd29yZDJJbnB1dC52YWwoKTtcclxuICAgICAgICB2YXIgc21zX2NhcHRjaGEgPSBzbXNDYXB0Y2hhSW5wdXQudmFsKCk7XHJcbiAgICAgICAgY29uc29sZS5sb2codGVsZXBob25lKTtcclxuICAgICAgICBjb25zb2xlLmxvZyh1c2VybmFtZSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coaW1nX2NhcHRjaGEpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHBhc3N3b3JkMSk7XHJcbiAgICAgICAgY29uc29sZS5sb2cocGFzc3dvcmQyKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhzbXNfY2FwdGNoYSk7XHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6Jy9hY2NvdW50L3JlZ2lzdGVyLycsXHJcbiAgICAgICAgICAgICdkYXRhJzp7XHJcbiAgICAgICAgICAgICAgICAndGVsZXBob25lJzp0ZWxlcGhvbmUsXHJcbiAgICAgICAgICAgICAgICAndXNlcm5hbWUnOnVzZXJuYW1lLFxyXG4gICAgICAgICAgICAgICAgJ2ltZ19jYXB0Y2hhJzppbWdfY2FwdGNoYSxcclxuICAgICAgICAgICAgICAgICdwYXNzd29yZDEnOnBhc3N3b3JkMSxcclxuICAgICAgICAgICAgICAgICdwYXNzd29yZDInOnBhc3N3b3JkMixcclxuICAgICAgICAgICAgICAgICdzbXNfY2FwdGNoYSc6c21zX2NhcHRjaGEsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzpmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgIH0pXHJcbiAgICB9KTtcclxuXHJcbn07XHJcblxyXG5cclxuJChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgYXV0aCA9IG5ldyBBdXRoKCk7XHJcbiAgICBhdXRoLnJ1bigpO1xyXG59KTtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuJChmdW5jdGlvbiAoKSB7XHJcbiAgICBpZih3aW5kb3cudGVtcGxhdGUpe1xyXG4gICAgICAgIHRlbXBsYXRlLmRlZmF1bHRzLmltcG9ydHMudGltZVNpbmNlID0gZnVuY3Rpb24gKGRhdGVWYWx1ZSkge1xyXG4gICAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKGRhdGVWYWx1ZSk7XHJcbiAgICAgICAgICAgIHZhciBkYXRldHMgPSBkYXRlLmdldFRpbWUoKTsgLy8g5b6X5Yiw55qE5piv5q+r56eS55qEXHJcbiAgICAgICAgICAgIHZhciBub3d0cyA9IChuZXcgRGF0ZSgpKS5nZXRUaW1lKCk7IC8v5b6X5Yiw55qE5piv5b2T5YmN5pe26Ze055qE5pe26Ze05oizXHJcbiAgICAgICAgICAgIHZhciB0aW1lc3RhbXAgPSAobm93dHMgLSBkYXRldHMpLzEwMDA7IC8vIOmZpOS7pTEwMDDvvIzlvpfliLDnmoTmmK/np5JcclxuICAgICAgICAgICAgaWYodGltZXN0YW1wIDwgNjApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAn5Yia5YiaJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmKHRpbWVzdGFtcCA+PSA2MCAmJiB0aW1lc3RhbXAgPCA2MCo2MCkge1xyXG4gICAgICAgICAgICAgICAgbWludXRlcyA9IHBhcnNlSW50KHRpbWVzdGFtcCAvIDYwKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBtaW51dGVzKyfliIbpkp/liY0nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYodGltZXN0YW1wID49IDYwKjYwICYmIHRpbWVzdGFtcCA8IDYwKjYwKjI0KSB7XHJcbiAgICAgICAgICAgICAgICBob3VycyA9IHBhcnNlSW50KHRpbWVzdGFtcCAvIDYwIC8gNjApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGhvdXJzKyflsI/ml7bliY0nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYodGltZXN0YW1wID49IDYwKjYwKjI0ICYmIHRpbWVzdGFtcCA8IDYwKjYwKjI0KjMwKSB7XHJcbiAgICAgICAgICAgICAgICBkYXlzID0gcGFyc2VJbnQodGltZXN0YW1wIC8gNjAgLyA2MCAvIDI0KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkYXlzICsgJ+WkqeWJjSc7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgdmFyIHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbW9udGggPSBkYXRlLmdldE1vbnRoKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF5ID0gZGF0ZS5nZXREYXkoKTtcclxuICAgICAgICAgICAgICAgIHZhciBob3VyID0gZGF0ZS5nZXRIb3VycygpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG1pbnV0ZSA9IGRhdGUuZ2V0TWludXRlcygpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHllYXIrJy8nK21vbnRoKycvJytkYXkrXCIgXCIraG91citcIjpcIittaW51dGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pOyJdfQ==
